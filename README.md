# GoPro Media Graber

**RU:** –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ —Å –∫–∞–º–µ—Ä—ã GoPro.
<br>
**EN:** A script for automatically downloading and organizing media files from a GoPro camera.

---

<details>
<summary>üá∑üá∫ **–†—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è**</summary>

–°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ —Å –∫–∞–º–µ—Ä—ã GoPro.

–û–Ω –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –∫–∞–º–µ—Ä–µ –ø–æ Bluetooth, –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç Wi-Fi, —Å–∫–∞—á–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö (—Å–∫–ª–µ–∏–≤–∞–µ—Ç –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç –ø–æ –¥–∞—Ç–µ —Å—ä–µ–º–∫–∏), –∞ –∑–∞—Ç–µ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏.

### üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–∞–º–µ—Ä–µ –ø–æ **Bluetooth LE**.
*   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ Wi-Fi –Ω–∞ –∫–∞–º–µ—Ä–µ.
*   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ **–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Wi-Fi** –Ω–∞ –ü–ö (—Ç–æ–ª—å–∫–æ –¥–ª—è Windows).
*   –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ **–Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤**, –∫–æ—Ç–æ—Ä—ã—Ö –µ—â–µ –Ω–µ—Ç –Ω–∞ –¥–∏—Å–∫–µ.
*   –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ **–ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –∏ –æ–±—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.
*   –ì–∏–±–∫–∞—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤:
    *   –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ —Å—ä–µ–º–æ—á–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ—Ä–≤–∞–ª—É.
    *   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è **—Å–∫–ª–µ–π–∫–∞ "–≥–ª–∞–≤"** (chapters) –≤–∏–¥–µ–æ —Å –ø–æ–º–æ—â—å—é `ffmpeg`.
    *   **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤** –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ —Å—ä–µ–º–∫–∏.
    *   –ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∂–∏–º–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—Ç–æ–ª—å–∫–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ, —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏ —Ç.–¥.).
*   –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π —Ñ–∞–π–ª `config.ini`.
*   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π **–≤–æ–∑–≤—Ä–∞—Ç –∫ –¥–æ–º–∞—à–Ω–µ–π —Å–µ—Ç–∏ Wi-Fi** –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è Windows).
*   **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞—Å—ã–ø–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã** –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞.
*   –°–∫—Ä–∏–ø—Ç –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã** –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –∑–∞—Ä—è–¥–∞.

### üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   **Python 3.8+**
*   **–í–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python**: `bleak`, `httpx`, `tqdm`
*   **ffmpeg**: –ù–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ.
    *   –ù–∞ Windows, –µ—Å–ª–∏ `ffmpeg` –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–∫—Ä–∏–ø—Ç **–ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Å–∫–∞—á–∞—Ç—å –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.
    *   –ù–∞ –¥—Ä—É–≥–∏—Ö –û–° `ffmpeg` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `PATH`, –ª–∏–±–æ –ø—É—Ç—å –∫ –Ω–µ–º—É –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –≤ `config.ini`.
*   **–û–°**: –°–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –Ω–∞ **Windows**. –ù–∞ –¥—Ä—É–≥–∏—Ö –û–° –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Wi-Fi –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ).
*   **Bluetooth-–∞–¥–∞–ø—Ç–µ—Ä** –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ.

### üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1.  –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª—ã.

2.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ Python-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
    ```bash
    pip install "bleak" "httpx" "tqdm"
    ```

3.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ffmpeg (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É –Ω–∞ Windows):**
    –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –¥–ª—è Windows ‚Äî —Å–∫–∞—á–∞—Ç—å —Å–±–æ—Ä–∫—É —Å [gyan.dev](https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-essentials.zip) –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å `ffmpeg.exe` –∏ `ffprobe.exe` –≤ –ø–∞–ø–∫—É `bin` —Ä—è–¥–æ–º —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º, –ª–∏–±–æ –≤ –ª—é–±—É—é –ø–∞–ø–∫—É, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—É—é –≤ —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PATH`.

4.  **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–≤–æ–µ —Å–æ–ø—Ä—è–∂–µ–Ω–∏–µ —Å –∫–∞–º–µ—Ä–æ–π (–≤–∞–∂–Ω—ã–π —à–∞–≥!):**
    *   –í–∫–ª—é—á–∏—Ç–µ –∫–∞–º–µ—Ä—É GoPro.
    *   –ù–∞ –∫–∞–º–µ—Ä–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –º–µ–Ω—é: **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ -> –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è -> –ü–æ–¥–∫–ª—é—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ -> GoPro Quik App**.
    *   –ü–æ–∫–∞ –∫–∞–º–µ—Ä–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ –ø–æ–∏—Å–∫–∞, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç. Windows "–∑–∞–ø–æ–º–Ω–∏—Ç" —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∏ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º —ç—Ç–æ—Ç —à–∞–≥ –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è.

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config.ini`)

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `config.ini`. –í–æ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

#### `[General]`
*   `identifier`: –ü–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Å–∏–º–≤–æ–ª–∞ —Å–µ—Ä–∏–π–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –∫–∞–º–µ—Ä—ã. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞ BLE-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ —Å–µ—Ç–∏ Wi-Fi. –ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º, —Å–∫—Ä–∏–ø—Ç –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –∫–∞–º–µ—Ä—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
*   `output_folder`: –ü–∞–ø–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∫–∞—á–∞–Ω–Ω—ã—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤.
*   `home_wifi`: –ò–º—è –≤–∞—à–µ–π –¥–æ–º–∞—à–Ω–µ–π Wi-Fi —Å–µ—Ç–∏. –°–∫—Ä–∏–ø—Ç –≤–µ—Ä–Ω–µ—Ç—Å—è –∫ –Ω–µ–π –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.

#### `[Processing]`
*   `mode`: –†–µ–∂–∏–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤.
    *   `full`: –°–∫–∞—á–∞—Ç—å, —Å–∫–ª–µ–∏—Ç—å —Å–µ—Å—Å–∏–∏ –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
    *   `rename_only`: –°–∫–∞—á–∞—Ç—å –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ö–ê–ñ–î–´–ô —Ñ–∞–π–ª –ø–æ –¥–∞—Ç–µ, –Ω–µ —Å–∫–ª–µ–∏–≤–∞—è.
    *   `download_only`: –¢–æ–ª—å–∫–æ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª—ã —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏.
    *   `touch_only`: –°–∫–∞—á–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞ —Ä–∞–≤–Ω–æ–π –¥–∞—Ç–µ —Å—ä–µ–º–∫–∏.
    *   `process_only`: –ù–µ —Å–∫–∞—á–∏–≤–∞—Ç—å, –∞ —Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —É–∂–µ —Å–∫–∞—á–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `output_folder`.
*   `session_gap_hours`: –í—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–∑—Ä—ã–≤ –≤ —á–∞—Å–∞—Ö, –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–æ–≤–æ–π —Å—ä–µ–º–æ—á–Ω–æ–π —Å–µ—Å—Å–∏–µ–π.
*   `filename_format`: –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω–∏ –¥–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã Python (`%Y`, `%m`, `%d`, `%H`, `%M`).
*   `ffmpeg_path`: –ü—É—Ç—å –∫ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–º—É —Ñ–∞–π–ª—É `ffmpeg.exe`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `ffmpeg`, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –µ–≥–æ –Ω–∞–ª–∏—á–∏—è –≤ `PATH`.

#### `[Advanced]`
*   `wifi_wait`: –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö) –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Wi-Fi —Å–µ—Ç–∏.
*   `auto_close_window`: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –æ–∫–Ω–æ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è `.exe` –≤–µ—Ä—Å–∏–∏). `yes` / `no`.

#### `[Deletion]`
*   `delete_after_download`: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ —É–¥–∞–ª—è—Ç—å —Ñ–∞–π–ª—ã —Å –∫–∞–º–µ—Ä—ã –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.
    *   `no`: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è—Ç—å.
    *   `ask`: –°–ø—Ä–∞—à–∏–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
    *   `yes`: –í—Å–µ–≥–¥–∞ —É–¥–∞–ª—è—Ç—å –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞.

### ‚ñ∂Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞ –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ä—è–¥–æ–º —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º.
2.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:
    ```bash
    python GP_graber.py
    ```
3.  –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∫–∏ –ø–æ –≤—Å–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
    ```bash
    python GP_graber.py --help
    ```
4.  –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏. –ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Wi-Fi), —Å–∫—Ä–∏–ø—Ç –≤—ã–≤–µ–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

### üì¶ –°–±–æ—Ä–∫–∞ –≤ .exe (–¥–ª—è Windows)

–í—ã –º–æ–∂–µ—Ç–µ —Å–æ–±—Ä–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ –æ–¥–∏–Ω –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π `.exe` —Ñ–∞–π–ª.

1.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PyInstaller:**
    ```bash
    pip install pyinstaller
    ```

2.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É:**
    ```bash
    pyinstaller --onefile --name GoProGraber --icon=icon.ico GP_graber.py
    ```

3.  **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ñ–∞–π–ª—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞:**
    *   –í–∞—à `GoProGraber.exe` –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –ø–∞–ø–∫–µ `dist`.
    *   **ffmpeg**: –ï—Å–ª–∏ `ffmpeg.exe` –∏ `ffprobe.exe` –Ω–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã, –ø–æ–º–µ—Å—Ç–∏—Ç–µ –∏—Ö —Ä—è–¥–æ–º —Å `.exe` —Ñ–∞–π–ª–æ–º –∏–ª–∏ –≤ –ø–æ–¥–ø–∞–ø–∫—É `bin`. –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –∏—Ö –Ω–µ –Ω–∞–π–¥–µ—Ç, –æ–Ω –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Å–∫–∞—á–∞—Ç—å –∏—Ö.
    *   **config.ini**: –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

###  troubleshooting –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

*   **–ö–∞–º–µ—Ä–∞ GoPro –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:**
    *   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Bluetooth –Ω–∞ –≤–∞—à–µ–º –ü–ö –≤–∫–ª—é—á–µ–Ω.
    *   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞ –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –±–ª–∏–∑–∫–æ –∫ –ü–ö.
    *   –ï—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–º–µ—Ä–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —Å–æ–ø—Ä—è–∂–µ–Ω–∏—è (—Å–º. —Ä–∞–∑–¥–µ–ª "–£—Å—Ç–∞–Ω–æ–≤–∫–∞").

*   **–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Wi-Fi –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
    *   **–ü–∞—Ä–æ–ª—å –æ—Ç Wi-Fi:** –ü–∞—Ä–æ–ª—å –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∫–∞–º–µ—Ä—ã –≤ –º–µ–Ω—é **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è -> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–º–µ—Ä–µ**.
    *   Windows —Ö—Ä–∞–Ω–∏—Ç –ø—Ä–æ—Ñ–∏–ª–∏ —Å–µ—Ç–µ–π. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Wi-Fi —Å–µ—Ç–∏ –≤–∞—à–µ–π –∫–∞–º–µ—Ä—ã –≤—Ä—É—á–Ω—É—é —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–æ–∏—Ç –≥–∞–ª–æ—á–∫–∞ "–ü–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏".

*   **–û—à–∏–±–∫–∞ "ffmpeg –Ω–µ –Ω–∞–π–¥–µ–Ω":**
    *   –ü–æ–∑–≤–æ–ª—å—Ç–µ —Å–∫—Ä–∏–ø—Ç—É —Å–∫–∞—á–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è Windows).
    *   –õ–∏–±–æ —É–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ `ffmpeg.exe` –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `ffmpeg_path` –≤ —Ñ–∞–π–ª–µ `config.ini`.

</details>

<details>
<summary>üá¨üáß **English version**</summary>

A script to automatically download and organize media files from a GoPro camera.

It connects to the camera via Bluetooth, activates Wi-Fi, downloads new files, processes them (merges and renames by shooting date), and then restores the original network settings.

### üöÄ Features

*   Automatic discovery and connection to the camera via **Bluetooth LE**.
*   Automatic activation of Wi-Fi on the camera.
*   Automatic **Wi-Fi switching** on the PC (Windows only).
*   Downloads only **new files** that are not yet on the disk.
*   Informative **progress bars** for each file and the overall download process.
*   Flexible post-processing of files:
    *   Grouping files into shooting sessions based on a time interval.
    *   Automatic **merging of video chapters** using `ffmpeg`.
    *   **Renaming files** based on the shooting date and time.
    *   Multiple processing modes (download only, rename only, etc.).
*   Configuration via a convenient `config.ini` file.
*   Automatic **return to the home Wi-Fi network** after completion (Windows only).
*   **Prevents the system from sleeping** while the script is running.
*   The script relies on the camera's **auto-power-off** feature to save battery.

### üìã Requirements

*   **Python 3.8+**
*   **External Python libraries**: `bleak`, `httpx`, `tqdm`
*   **ffmpeg**: Required for video processing.
    *   On Windows, if `ffmpeg` is not found, the script will **offer to download it automatically** on the first run.
    *   On other OS, `ffmpeg` must be installed and available in the system's `PATH`, or the path to it must be specified in `config.ini`.
*   **OS**: The script is fully functional on **Windows**. On other operating systems, automatic Wi-Fi switching will not work (manual connection will be required).
*   A **Bluetooth adapter** on the computer.

### üõ†Ô∏è Installation and Setup

1.  Clone the repository or download the files.

2.  Install the required Python libraries:
    ```bash
    pip install "bleak" "httpx" "tqdm"
    ```

3.  **Install ffmpeg (if not using auto-download on Windows):**
    The easiest way for Windows is to download a build from [gyan.dev](https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-essentials.zip) and extract `ffmpeg.exe` and `ffprobe.exe` into a `bin` folder next to the script, or into any folder included in the system's `PATH`.

4.  **Perform the initial pairing with the camera (important step!):**
    *   Turn on your GoPro camera.
    *   On the camera, navigate to: **Preferences -> Connections -> Connect Device -> GoPro Quik App**.
    *   While the camera is in pairing mode, run the script for the first time. Windows will "remember" the device, and this step will not be required in the future.

### ‚öôÔ∏è Configuration (`config.ini`)

On the first run, the script will automatically create a `config.ini` file. Here is a description of its parameters:

#### `[General]`
*   `identifier`: The last 4 characters of the camera's serial number. Used to find the BLE device and Wi-Fi network. If left empty, the script will try to find the camera automatically.
*   `output_folder`: The folder for saving downloaded media files.
*   `home_wifi`: The name of your home Wi-Fi network. The script will switch back to it after finishing.

#### `[Processing]`
*   `mode`: File processing mode.
    *   `full`: Download, merge sessions, and rename by date (default).
    *   `rename_only`: Download and rename EACH file by date, without merging.
    *   `download_only`: Only download files with their original names.
    *   `touch_only`: Download and set the file's modification date to the shooting date.
    *   `process_only`: Do not download, only process already downloaded files in the `output_folder`.
*   `session_gap_hours`: The time gap in hours that is considered a new shooting session.
*   `filename_format`: The name format for renamed files. Uses standard Python directives (`%Y`, `%m`, `%d`, `%H`, `%M`).
*   `ffmpeg_path`: The path to the `ffmpeg.exe` executable. Defaults to `ffmpeg`, which requires it to be in the `PATH`.

#### `[Advanced]`
*   `wifi_wait`: The time to wait (in seconds) when trying to connect to a Wi-Fi network.
*   `auto_close_window`: Automatically close the console window after completion (for the `.exe` version only). `yes` / `no`.

#### `[Deletion]`
*   `delete_after_download`: Defines whether to delete files from the camera after a successful download.
    *   `no`: Never delete.
    *   `ask`: Ask every time (default).
    *   `yes`: Always delete without prompting.

### ‚ñ∂Ô∏è Usage

1.  Make sure the camera is turned on and near the computer.
2.  Run the script from the command line:
    ```bash
    python GP_graber.py
    ```
3.  To get help with all configuration parameters, run:
    ```bash
    python GP_graber.py --help
    ```
4.  Follow the logs in the console. If manual action is required (e.g., connecting to Wi-Fi), the script will display a corresponding message.

### üì¶ Building into .exe (for Windows)

You can build the script into a single executable `.exe` file.

1.  **Install PyInstaller:**
    ```bash
    pip install pyinstaller
    ```

2.  **Run the build:**
    ```bash
    pyinstaller --onefile --name GoProGraber --icon=icon.ico GP_graber.py
    ```

3.  **Prepare the files for running:**
    *   Your `GoProGraber.exe` will be in the `dist` folder.
    *   **ffmpeg**: If `ffmpeg.exe` and `ffprobe.exe` are not bundled, place them next to the `.exe` file or in a `bin` subfolder. If the script doesn't find them, it will offer to download them.
    *   **config.ini**: The configuration file will be created automatically on the first run.

### troubleshooting Troubleshooting

*   **GoPro camera not found:**
    *   Make sure Bluetooth is enabled on your PC.
    *   Make sure the camera is turned on and close to the PC.
    *   If this is the first run, make sure the camera is in pairing mode (see the "Installation" section).

*   **Failed to connect to Wi-Fi automatically:**
    *   **Wi-Fi Password:** The password can be found on the camera's screen in the **Connections -> Camera Info** menu.
    *   Windows stores network profiles. Connect to your camera's Wi-Fi network manually at least once. Make sure the "Connect automatically" box is checked.

*   **Error "ffmpeg not found":**
    *   Allow the script to download the utilities automatically (Windows only).
    *   Or, specify the full path to `ffmpeg.exe` in the `ffmpeg_path` parameter in `config.ini`.

</details>